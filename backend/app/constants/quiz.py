# 성격 퀴즈 질문 및 선택지
# 각 선택지는 특정 성격 특성과 연결됨

PERSONALITY_QUIZ_QUESTIONS = [
    {
        "id": 1,
        "question": "주말에 충분한 휴식을 취했다면, 어떤 활동을 선택하시겠어요?",
        "options": [
            {
                "id": "a",
                "text": "친구들과 만나서 수다 떨기",
                "traits": ["사교적", "외향적", "활발함"]
            },
            {
                "id": "b",
                "text": "집에서 책이나 영화 감상",
                "traits": ["내성적", "사색적", "차분함"]
            },
            {
                "id": "c",
                "text": "새로운 카페나 맛집 탐방",
                "traits": ["호기심 많은", "모험적", "트렌디한"]
            },
            {
                "id": "d",
                "text": "운동이나 야외 활동",
                "traits": ["활동적", "건강 지향적", "에너지 넘치는"]
            }
        ]
    },
    {
        "id": 2,
        "question": "친구가 고민을 털어놓을 때, 주로 어떻게 반응하나요?",
        "options": [
            {
                "id": "a",
                "text": "일단 공감하면서 들어준다",
                "traits": ["공감 능력", "따뜻함", "경청하는"]
            },
            {
                "id": "b",
                "text": "해결책을 찾아 조언해준다",
                "traits": ["문제 해결 지향", "논리적", "실용적"]
            },
            {
                "id": "c",
                "text": "기분 전환을 위해 농담을 건넨다",
                "traits": ["유머러스", "긍정적", "밝은"]
            },
            {
                "id": "d",
                "text": "비슷한 경험을 공유하며 위로한다",
                "traits": ["공유하는", "연대감 있는", "솔직한"]
            }
        ]
    },
    {
        "id": 3,
        "question": "새로운 프로젝트를 시작할 때 어떤 스타일인가요?",
        "options": [
            {
                "id": "a",
                "text": "철저하게 계획을 세우고 시작",
                "traits": ["계획적", "신중한", "체계적"]
            },
            {
                "id": "b",
                "text": "일단 시작하고 수정해 나감",
                "traits": ["즉흥적", "유연한", "실행력 있는"]
            },
            {
                "id": "c",
                "text": "다른 사람들과 아이디어를 나눔",
                "traits": ["협력적", "소통하는", "열린 마음"]
            },
            {
                "id": "d",
                "text": "비슷한 사례를 충분히 조사",
                "traits": ["분석적", "꼼꼼한", "연구하는"]
            }
        ]
    },
    {
        "id": 4,
        "question": "스트레스를 받을 때 주로 어떻게 해소하나요?",
        "options": [
            {
                "id": "a",
                "text": "가까운 사람에게 이야기함",
                "traits": ["개방적", "관계 지향적", "표현적"]
            },
            {
                "id": "b",
                "text": "혼자만의 시간을 가짐",
                "traits": ["자기 성찰적", "독립적", "내면 지향"]
            },
            {
                "id": "c",
                "text": "취미 활동에 몰두함",
                "traits": ["창의적", "몰입하는", "열정적"]
            },
            {
                "id": "d",
                "text": "잠을 자거나 맛있는 걸 먹음",
                "traits": ["본능적", "단순한", "자기 돌봄"]
            }
        ]
    },
    {
        "id": 5,
        "question": "나에게 가장 중요한 가치는 무엇인가요?",
        "options": [
            {
                "id": "a",
                "text": "사랑하는 사람들과의 관계",
                "traits": ["관계 중시", "사랑이 많은", "가족 지향"]
            },
            {
                "id": "b",
                "text": "나만의 성장과 발전",
                "traits": ["성장 지향", "야망 있는", "자기 계발"]
            },
            {
                "id": "c",
                "text": "일상의 작은 행복들",
                "traits": ["현재 지향적", "감사하는", "소확행"]
            },
            {
                "id": "d",
                "text": "새로운 경험과 모험",
                "traits": ["모험심", "도전적", "자유로운"]
            }
        ]
    }
]

# 퀴즈 기반 임시 페르소나 생성 프롬프트
QUIZ_PERSONA_GENERATION_PROMPT = """
당신은 성격 퀴즈 결과를 분석하여 사용자만의 AI 페르소나를 생성하는 전문가입니다.

사용자의 퀴즈 응답을 바탕으로 그 사람의 성격을 반영한 따뜻하고 친근한 페르소나를 생성해주세요.
이 페르소나는 사용자가 일기를 더 작성하면 진화할 예정입니다.

## 사용자의 성격 특성 (퀴즈 결과):
{traits}

## 응답 형식 (JSON):
{{
    "name": "페르소나 이름 (친근한 별명, 예: '따뜻한 공감러', '열정 가득 탐험가')",
    "personality": "성격에 대한 따뜻한 설명 (2-3문장, 긍정적인 톤)",
    "traits": ["특성1", "특성2", "특성3", "특성4", "특성5"],
    "speaking_style": "말투 스타일 (친근하고 따뜻한 말투 설명)"
}}

주의사항:
- 임시 페르소나이므로 너무 구체적인 특성보다는 일반적인 성격 특성 위주로
- 일기를 작성하면 더 구체적인 페르소나로 발전할 수 있다는 기대감을 줄 수 있도록
- 무조건 긍정적이고 응원하는 톤으로
- 한국어로 응답
"""

# 페르소나 레벨 정의
PERSONA_LEVELS = {
    "temporary": {
        "name": "임시 페르소나",
        "description": "성격 퀴즈 기반으로 생성된 기본 페르소나예요.",
        "min_diaries": 0,
        "next_level": "basic",
        "next_level_diaries": 3
    },
    "basic": {
        "name": "기본 페르소나",
        "description": "일기를 바탕으로 성장한 페르소나예요.",
        "min_diaries": 3,
        "next_level": "complete",
        "next_level_diaries": 7
    },
    "complete": {
        "name": "완전한 페르소나",
        "description": "충분한 일기를 통해 완성된 나만의 페르소나예요.",
        "min_diaries": 7,
        "next_level": None,
        "next_level_diaries": None
    }
}

def get_persona_level(diary_count: int, has_quiz: bool) -> str:
    """일기 개수와 퀴즈 완료 여부에 따른 페르소나 레벨 반환"""
    if diary_count >= 7:
        return "complete"
    elif diary_count >= 3:
        return "basic"
    elif has_quiz:
        return "temporary"
    return None
